<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<!--<link rel="stylesheet" href="css/electricroommonitoring.css"/>-->
	<title>用户信息</title>
	<script  type="text/javascript" src="js/jquery-3.3.1.js"></script>
	<script  type="text/javascript" src="js/config.js"></script>
	<script  type="text/javascript" src="js/layer/layer.js"></script>
	<script  type="text/javascript" src="js/function.js"></script>
	
</head>
<body onload="GetUserProfile()">
	<div style="width:100%;height:100%;">
		<h2 align="center" style="color:blue;">用户详细信息</h2>
		<form id="form_deviceinfo">
			<table id="userprofile-format"align="center">
			<span>
			<tr>
			<td class="table-lable"> 用户编号:</td>
			<td><input id="up-yhbh" type="text" readonly="readonly" style="width:150px;" value=""></input>
			</span>
			</td>
			</tr>
			<tr>
			<td class="table-lable"> 用户名称:</td>
			<td class="table-lable" >
				<input id="up-yhmc" type="text" readonly="readonly" style="width:150px;"value="" ></input>
			<!--<select id="sblx" style="font-size:20px">
					<option value="llj">流量计</option>
					<option value="cwj">温度测量</option>
					<option value="ylcgq">压力传感器</option>
					<option value="wdcgq">温度传感器</option>
				</select>-->
			</td>
			</tr>
			<span>
			<tr>
			<td class="table-lable"> 登录密码:</td>
			<td>	<input id="up-yhmm" type="password"  style="width:150px" value="admin"></input><span id="txt_editpassword" style="color:red;font-size:12px;margin-left:10px"><a href="javascript:showeditpassword()">修改密码</a></span>
			</td>
			</tr>
			</span>
			<span>
			<tr >
			<td class="table-lable"id="up-editpassword" style="display: none;">新密码:</td>
			<td>	<input id="up-yhmmqr" type="password" style="width:150px;display: none;" value=""></input><span id="txt_postpassword" style="color:red;font-size:12px;margin-left:10px;display: none;"><a href="javascript:postpassword()">提交修改</a></span>
			</td>
			</tr>
			</span>
			<span>
			<tr>
			<td class="table-lable"> 用户权限:</td>
			<td><input id="up-yhqx" type="text" style="width:150px" value=""></input>
			</td>
			</tr>
				
			</span>
			<span>
				<tr>
				<td class="table-lable"> 联系电话:</td>
				<td><input id="up-tel" type="text" style="width:150px" value=""></input>
				</td>
				</tr>
					
			</span>
			<span>
				<tr>
				<td class="table-lable"> 电子信箱:</td>
				<td><input id="up-email" type="text" style="width:150px" value=""></input>
				</td>
				</tr>
					
				</span>
			<tr>
			<td class="table-lable"> 详细说明:</td>
			<td>
				<input type="text" id="up-yhsm" type="text" style="width:150px;" value="">
				</input>
			</td>
			</tr>
			<tr style="height:30px">
			</tr>
			<tr>
			
			<td class="table-lable">
				<input type="button" id="info_ok" onclick="infook()" style="margin-left:10px;width:100px;height:30px;color:#0000de;background-image:url(res/jianbian_orange.jpg);" value="确定"/></td>
			<td class="table-lable">	<input type="button" name="reset" id="reset" style="margin-left:10px;width:100px;height:30px;color:#0000de;background-image:url(res/jianbian_orange.jpg);" onclick="javascript:history.go(-1)" value="取消"/>
			<!-- background: -webkit-gradient(linear, left top, left bottom, from(#D2691E), color-stop(1, #ffffff), to(rgb(0,0,0)));display:none-->
			</td>
			</tr>
			</table>
			
		</form>
	</div>
	<script>
		function infook(){
			var userinfo=new Object();
			userinfo.Id=document.getElementById("up-yhbh").value;
			userinfo.Name=document.getElementById("up-yhmc").value;
			userinfo.Roles=document.getElementById("up-yhqx").value;
			userinfo.Tele=document.getElementById("up-tel").value;
			userinfo.Email=document.getElementById("up-email").value;
			userinfo.Display=document.getElementById("up-yhsm").value;
			if (confirm("你确定提交吗？")) {  
				postuserinfo(userinfo);
			}  
			else {  
				
			}  
  
		}
		function postuserinfo(arruserinfo){
			var url = jfjk_base_config.baseurl + "UpdateProfile";
			url = encodeURI(url);
			$.ajax({
				beforeSend: function(request) {
					request.setRequestHeader("_token", sessionStorage.token);
				},
				url: url,
				type: 'POST',
				dataType: 'json',
				contentType: "application/json",
				data:JSON.stringify(arruserinfo),
				timeout: 10000,
				error: function(XMLHttpRequest, textStatus, errorThrown) {
					layer.alert('密码修改操作失败');
				},
				success: function(data, status) {
					if (status == "success") {
						if (data.Error == null) {
							layer.alert("密码修改成功，请用新密码登录");
							window.location.href = "javascript:void(0)";
							top.location = "index.html";
							return;
						} else {
							layer.alert(data.Error);
						}
					}
				}
			});
		}
	</script>
</body>
</html>