<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
	<link rel="stylesheet" href="css/electricroommonitoring.css"/>
	<title>实时数据</title>
	<script  type="text/javascript" src="js/jquery-3.3.1.js"></script>
	<script  type="text/javascript" src="js/config.js"></script>
	<script  type="text/javascript" src="js/jquery.tablesort.min.js"></script>
	<script  type="text/javascript" src="js/function.js"></script>
	<script  type="text/javascript" src="js/layer/layer.js"></script>
	<style type="text/css">
    *{
       margin:0px;
       padding:0px;
    }
    /**/
    th,td{
        border:1px solid black;
        text-align:center;
        line-height:center;
        width:200px;
        height:30px;
    }
    td{
        border:1px solid black;
        text-align:center;
        line-height:center;
    }
	* {
		margin: 0;
		padding: 0;
	}
	table {
		/*设置相邻单元格的边框间的距离*/
		border-spacing: 0;
		/*表格设置合并边框模型*/
		border-collapse: collapse;
		text-align: center;
	}
	/*关键设置 tbody出现滚动条 height: 500px;overflow-y: scroll;*/
	table tbody {
		display: block;
	}
	table thead,
	tbody tr {
		display: table;
		table-layout: fixed;
	}
	/*关键设置：滚动条默认宽度是16px 将thead的宽度减16pxwidth: 100%;
	table thead {
		width: calc( tbody.width )
		color:#0000ff;
	}
	table thead th {
		background: #ccc;
	}*/
  </style>
</head>
<body onload="getrealdatabystation(0)" onunload="stopWorker()">
	<div>
		<div class="pagecard" id="pagecard1" style="margin-bottom:10px">
			<h3 id="head_real" align="center" >实时数据</h3>
			<!--ul class="pc-nav" >
				<li ><a href="#" target="iframe_main"><i>数据列表</i></a></li>
				<li ><a href="#" target="iframe_main"><i>变化曲线</i></a></li>
			</ul-->
		</div>
		<div >
		<div  class="row" style="margin-bottom:10px;width=100%;overflow:auto;" align="center">
			<ul class="count_info" align="center" widht="1000px" >
				<li style="width:50px"><b>站名：</b></li>
				<li id="station_name"style="width:50px;margin-right:0px"> </li>
				<li style="width:30px;margin-right:10px"><b>记录：</b></li>
				<li id="count_val"style="width:30px;margin-right:0px"> </li>
				<!-- 
				<li style="width:50px;margin-right:0px"><b>正常数：</b> </li>
				<li id="normal_count"style="width:150px;margin-right:0px"> </li>-->
				<li style="width:30px;margin-right:0px"><b>异常：</b></li>
				<li id="err_count"style="width:30px;margin-right:0px"> </li>
				<li style="width:100px;margin-right:0px"><a href="#" style="align:right;margin-left:20px;" onclick="method5('realtable')">导出Excel</a></li>
			</ul>
		</div>
		</div>
		<div align="center" style="overflow:auto;">
		<table class="tabtop13" id="realtable" width="1200px" >
			<thead>
				<tr >
				<th style="color:#0000ff" onclick="sortt('.sensorid')"><a href="javascript:">测量点编号 <span class="sensorid"></span></a></th>
				<th style="color:#0000ff" onclick="sortt('.sensorname')" ><a href="javascript:">测量点名称<span class="sensorname"></span> </a></th>
				<!--th>数据编号</thonclick="sortt('.tmpvalue')"-->
				<th style="color:#0000ff" onclick="sortt('.time')"><a href="javascript:">测量时间 <span class="time"></span></a></th>
				<th style="color:#0000ff" onclick="sortt('.tmpvalue')"><a href="javascript:">温度（℃）<span class="tmpvalue"></span></a></th>
				<th style="color:#0000ff">查看历史数据</th>
				<th style="color:#0000ff">查看告警信息</th> 
				<!--<th style="width:18px;border:0px solid black;"></th>-->
				</tr>
			</thead>
			<tbody id='realdata-tbody'>
			</tbody>
		</table>
	</div>
	</div>
	<script type="text/javascript">
		//var t1 = window.setInterval("getrealdatabystation(1);",30000);
		if(typeof(Worker) !== "undefined") {
        if(typeof(w1) == "undefined") {
            w1 = new Worker("delay_worker.js");
        }
		i=0;
        w1.onmessage = function(event) {
            //document.getElementById("result").innerHTML = event.data;
			i++
			if(i%30==0){
				getrealdatabystation(1);
			}
        };
		} else {
			//document.getElementById("result").innerHTML = "抱歉，你的浏览器不支持 Web Workers...";
			var t1 = window.setInterval("getrealdatabystation(1);",30000);
		}
		//表格排序使用插件
		$(function() {
			$('table').tablesort().data('tablesort');
		})
		function stopWorker() 
		{ 
			w1.terminate();
			w1 = undefined;
		}
	</script>
</body>
</html>